import{r as K,m as I,j as A,d as T,u as C,e as v,p as E,q as F,c as b,a as t,t as n,b as e,s as M,h as c,w as d,v as u,x as R,F as x,f as S,l as B,o as g}from"./vue-vendor-BLy7Ta_u.js";import{u as N,c as O,g as W,_ as j}from"./_plugin-vue_export-helper-BkCLdZia.js";const q=()=>{const y=A(),f=K(!1),a=I({title:"",description:"",content:"",categoryKey:"dit",tag:"",badge:"",date:new Date().toISOString().split("T")[0],platform:"Wechat",cover:"linear-gradient(135deg, #0a0f26 0%, #0c1a4d 35%, #032c5f 65%, #0c1a4d 100%)"}),l=()=>{a.title="",a.description="",a.content="",a.categoryKey="dit",a.tag="",a.badge="",a.date=new Date().toISOString().split("T")[0],a.platform="Wechat",a.cover="linear-gradient(135deg, #0a0f26 0%, #0c1a4d 35%, #032c5f 65%, #0c1a4d 100%)"},m=i=>{a.id=i.id,a.title=i.title,a.description=i.description,a.content=i.content,a.categoryKey=i.categoryKey,a.tag=i.tag,a.badge=i.badge,a.date=i.date,a.platform=i.platform,a.cover=i.cover},p=()=>!(!a.title?.trim()||!a.description?.trim()||!a.content?.trim()||!a.categoryKey||!a.tag?.trim()||!a.date||!a.platform?.trim()||!a.cover?.trim()),s=async()=>{if(!p())return null;f.value=!0;try{let i;return a.id?i=N(a.id,a):i=O(a),i}finally{f.value=!1}};return{form:a,isSubmitting:f,resetForm:l,loadArticle:m,validateForm:p,handleSubmit:s,handleSubmitAndRedirect:async()=>{const i=await s();i&&y.push({name:"articleDetail",params:{id:i.id}})}}},z={class:"layout edit-layout"},H={class:"hero"},L={class:"edit-content"},$={class:"form-section"},G={class:"form-label"},J=["placeholder"],Q={class:"form-section"},X={class:"form-label"},Y=["placeholder"],Z={class:"form-row"},ee={class:"form-section"},te={class:"form-label"},ae=["value"],le={class:"form-section"},oe={class:"form-label"},se=["placeholder"],re={class:"form-row"},ie={class:"form-section"},ne={class:"form-label"},ce={class:"form-section"},de={class:"form-label"},ue=["placeholder"],me={class:"form-row"},pe={class:"form-section"},fe={class:"form-label"},_e=["placeholder"],be={class:"form-section"},ge={class:"form-label"},he=["placeholder"],ve={class:"form-section"},ye={class:"form-label"},ke={class:"cover-presets"},xe=["onClick"],Se={class:"form-section"},Ae={class:"form-label"},we=["placeholder"],Pe={class:"form-hint"},Ve={class:"form-actions"},Ue=["disabled"],De=T({__name:"ArticleEditPage",setup(y){const f=E(),a=A(),{t:l}=C(),m=v(()=>!!f.params.id),p=v(()=>{const _=f.params.id;return _?Number(_):null}),{form:s,isSubmitting:h,loadArticle:i,handleSubmitAndRedirect:k,resetForm:w}=q(),P=v(()=>[{key:"dit",label:l("categories.dit")},{key:"luna",label:l("categories.luna")},{key:"note",label:l("categories.note")},{key:"art",label:l("categories.art")},{key:"travel",label:l("categories.travel")}]),V=["linear-gradient(135deg, #0a0f26 0%, #0c1a4d 35%, #032c5f 65%, #0c1a4d 100%)","linear-gradient(135deg, #0d121f 0%, #132642 50%, #243c5a 100%)","linear-gradient(135deg, #101820 0%, #1f1f2f 50%, #2c2c3b 100%)","linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)","linear-gradient(135deg, #2d1b69 0%, #11998e 100%)","linear-gradient(135deg, #667eea 0%, #764ba2 100%)"];F(()=>{if(m.value&&p.value){const _=W(p.value);_?i(_):a.push({name:"articles"})}else w()});const U=()=>{m.value&&p.value?a.push({name:"articleDetail",params:{id:p.value}}):a.push({name:"articles"})};return(_,r)=>(g(),b("main",z,[t("section",H,[t("h1",null,n(m.value?e(l)("article.editTitle"):e(l)("article.createTitle")),1),t("p",null,n(m.value?e(l)("article.editDesc"):e(l)("article.createDesc")),1)]),t("section",L,[t("form",{class:"article-form",onSubmit:r[9]||(r[9]=M((...o)=>e(k)&&e(k)(...o),["prevent"]))},[t("div",$,[t("label",G,[c(n(e(l)("article.title"))+" ",1),d(t("input",{"onUpdate:modelValue":r[0]||(r[0]=o=>e(s).title=o),type:"text",placeholder:e(l)("article.titlePlaceholder")},null,8,J),[[u,e(s).title]])])]),t("div",Q,[t("label",X,[c(n(e(l)("article.description"))+" ",1),d(t("textarea",{"onUpdate:modelValue":r[1]||(r[1]=o=>e(s).description=o),rows:"3",placeholder:e(l)("article.descriptionPlaceholder")},null,8,Y),[[u,e(s).description]])])]),t("div",Z,[t("div",ee,[t("label",te,[c(n(e(l)("article.category"))+" ",1),d(t("select",{"onUpdate:modelValue":r[2]||(r[2]=o=>e(s).categoryKey=o)},[(g(!0),b(x,null,S(P.value,o=>(g(),b("option",{key:o.key,value:o.key},n(o.label),9,ae))),128))],512),[[R,e(s).categoryKey]])])]),t("div",le,[t("label",oe,[c(n(e(l)("article.tag"))+" ",1),d(t("input",{"onUpdate:modelValue":r[3]||(r[3]=o=>e(s).tag=o),type:"text",placeholder:e(l)("article.tagPlaceholder")},null,8,se),[[u,e(s).tag]])])])]),t("div",re,[t("div",ie,[t("label",ne,[c(n(e(l)("article.date"))+" ",1),d(t("input",{"onUpdate:modelValue":r[4]||(r[4]=o=>e(s).date=o),type:"date"},null,512),[[u,e(s).date]])])]),t("div",ce,[t("label",de,[c(n(e(l)("article.platform"))+" ",1),d(t("input",{"onUpdate:modelValue":r[5]||(r[5]=o=>e(s).platform=o),type:"text",placeholder:e(l)("article.platformPlaceholder")},null,8,ue),[[u,e(s).platform]])])])]),t("div",me,[t("div",pe,[t("label",fe,[c(n(e(l)("article.badge"))+" ",1),d(t("input",{"onUpdate:modelValue":r[6]||(r[6]=o=>e(s).badge=o),type:"text",placeholder:e(l)("article.badgePlaceholder")},null,8,_e),[[u,e(s).badge]])])]),t("div",be,[t("label",ge,[c(n(e(l)("article.cover"))+" ",1),d(t("input",{"onUpdate:modelValue":r[7]||(r[7]=o=>e(s).cover=o),type:"text",placeholder:e(l)("article.coverPlaceholder")},null,8,he),[[u,e(s).cover]])])])]),t("div",ve,[t("label",ye,[c(n(e(l)("article.coverPresets"))+" ",1),t("div",ke,[(g(),b(x,null,S(V,(o,D)=>t("button",{key:D,type:"button",class:"cover-preset",style:B({background:o}),onClick:Ke=>e(s).cover=o},null,12,xe)),64))])])]),t("div",Se,[t("label",Ae,[c(n(e(l)("article.content"))+" ",1),d(t("textarea",{"onUpdate:modelValue":r[8]||(r[8]=o=>e(s).content=o),rows:"20",placeholder:e(l)("article.contentPlaceholder"),class:"content-textarea"},null,8,we),[[u,e(s).content]])]),t("p",Pe,n(e(l)("article.contentHint")),1)]),t("div",Ve,[t("button",{type:"button",class:"cancel-btn",onClick:U},n(e(l)("article.cancel")),1),t("button",{type:"submit",class:"submit-btn",disabled:e(h)},n(e(h)?e(l)("article.saving"):m.value?e(l)("article.update"):e(l)("article.publish")),9,Ue)])],32)])]))}}),Ce=j(De,[["__scopeId","data-v-0f663e6d"]]);export{Ce as default};
