import{r as k,c as f,d as A,u as $,a as i,b as e,t as r,e as n,F as w,h as T,w as K,j as m,v as M,k as N,l as D,g as x,m as q,p as B,f as F,i as c}from"./vue-vendor-kiT1BP1D.js";import{a as H}from"./index-CYm28XF0.js";import{u as V}from"./useCategories-C2sffmD1.js";import{g as j}from"./coverStyle-BhxAb7xK.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./math-vendor-C4rbpj_m.js";import"./markdown-vendor-BDlm1NQN.js";const E=b=>{const l=k(""),p=(s,o)=>{if(!o.trim())return s;const v=new RegExp(`(${o})`,"gi");return s.replace(v,"<mark>$1</mark>")},_=f(()=>{const s=l.value.trim().toLowerCase();return s?b.filter(o=>[o.title,o.description,o.content,o.tag,o.categoryKey].join(" ").toLowerCase().includes(s)):b}),h=f(()=>{const s=l.value.trim();return s?_.value.map(o=>({...o,highlightedTitle:p(o.title,s),highlightedDescription:p(o.description,s)})):[]});return{searchQuery:l,searchResults:_,highlightedResults:h,clearSearch:()=>{l.value=""}}},I={class:"layout"},P={class:"content"},Q={class:"sidebar"},U={class:"filter-title"},G={class:"category-list"},J=["onClick"],O={class:"article-area"},W={class:"search-section"},X={class:"search-box"},Y=["placeholder"],Z={class:"list-header"},ee={class:"article-count"},te={key:0,class:"search-hint"},se={class:"header-actions"},ae={class:"articles"},oe=["onClick","onKeyup"],ne={key:0,class:"badge"},le={class:"card-body"},re={class:"tag-row"},ie={class:"tag"},ce=["innerHTML"],ue=["innerHTML"],de={class:"meta"},he={key:0,class:"empty-state"},pe=A({__name:"ArticlesPage",setup(b){const{t:l}=$(),p=q(),{categories:_}=V(!0),h=k("all"),g=k(!0),{searchQuery:s,searchResults:o,highlightedResults:v}=E(H),C=u=>{p.push({name:"articleDetail",params:{id:u}})},R=()=>{p.push({name:"articleNew"})},y=f(()=>{let u=o.value;return h.value!=="all"&&(u=u.filter(a=>a.categoryKey===h.value)),u.slice().sort((a,t)=>{const d=new Date(a.date).getTime()-new Date(t.date).getTime();return g.value?-d:d})}),L=f(()=>s.value.trim()?y.value.map(a=>{const t=v.value.find(d=>d.id===a.id);return t?{...a,highlightedTitle:t.highlightedTitle,highlightedDescription:t.highlightedDescription}:a}):y.value),S=()=>{g.value=!g.value};return(u,a)=>(c(),i("main",I,[e("section",P,[e("aside",Q,[e("div",U,[a[2]||(a[2]=e("span",{class:"filter-icon"},"âŒ˜",-1)),e("span",null,r(n(l)("filter.category")),1)]),e("div",G,[(c(!0),i(w,null,T(n(_),t=>(c(),i("button",{key:t.key,class:x(["category-item",{active:h.value===t.key}]),type:"button",onClick:d=>h.value=t.key},r(t.label),11,J))),128))])]),e("section",O,[e("div",W,[e("div",X,[a[3]||(a[3]=e("span",{class:"search-icon"},"ðŸ”",-1)),K(e("input",{"onUpdate:modelValue":a[0]||(a[0]=t=>N(s)?s.value=t:null),type:"text",class:"search-input",placeholder:n(l)("search.placeholder")},null,8,Y),[[M,n(s)]]),n(s)?(c(),i("button",{key:0,class:"clear-btn",type:"button",onClick:a[1]||(a[1]=t=>s.value="")}," Ã— ")):m("",!0)])]),e("div",Z,[e("div",ee,[D(r(n(l)("articles.count",{count:y.value.length}))+" ",1),n(s)?(c(),i("span",te,r(n(l)("search.results",{query:n(s)})),1)):m("",!0)]),e("div",se,[e("button",{class:"new-article-btn",type:"button",onClick:R}," + "+r(n(l)("article.new")),1),e("button",{class:"sort-btn",type:"button",onClick:S},[D(r(n(l)("actions.sortByTime"))+" ",1),e("span",{class:x(["arrow",{rotated:!g.value}])},"âŒ„",2)])])]),e("div",ae,[(c(!0),i(w,null,T(L.value,t=>(c(),i("article",{key:t.id,class:"article-card",role:"button",tabindex:"0",onClick:d=>C(t.id),onKeyup:B(d=>C(t.id),["enter"])},[e("div",{class:"card-cover",style:F(n(j)(t.cover))},[t.badge?(c(),i("span",ne,r(t.badge),1)):m("",!0)],4),e("div",le,[e("div",re,[e("span",ie,r(t.tag),1)]),e("span",{class:"title",innerHTML:t.highlightedTitle||t.title},null,8,ce),e("p",{class:"description",innerHTML:t.highlightedDescription||t.description},null,8,ue),e("div",de,[e("span",null,r(t.date),1),a[4]||(a[4]=e("span",{class:"dot"},"Â·",-1)),e("span",null,r(t.platform),1)])])],40,oe))),128)),y.value.length===0?(c(),i("div",he,[e("p",null,r(n(l)("search.noResults")),1)])):m("",!0)])])])]))}}),ke=z(pe,[["__scopeId","data-v-fbe473fb"]]);export{ke as default};
